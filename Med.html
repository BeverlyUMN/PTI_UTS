<!DOCTYPE html>
<html>
    <head>
        <title>Med</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="styles.css"> 
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    </head>
    <body>
        <div class="container p2 text-center">
            <div>
                <h3 class="mt-3 mb-3">UMNGotcha</h3>
                <hr>
            </div>
            <div id="progressBar">
                <div class="row p-1">
                    <div class="col d-flex align-items-center">
                        <img src="icons/makan.png">
                        <div class="progress" id="eatBar">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 100%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">100%</div>
                        </div>
                    </div>
                    <div class="col d-flex align-items-center">
                        <img src="icons/tidur.png">
                        <div class="progress" id="sleepBar">
                            <div class="progress-bar bg-info" role="progressbar" style="width: 100%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
                <div class="row p-1">
                    <div class="col d-flex align-items-center">
                        <img src="icons/main.png">
                        <div class="progress" id="playBar">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: 100%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="col d-flex align-items-center">
                        <img src="icons/med.png">
                        <div class="progress"  id="medBar">
                            <div class="progress-bar bg-danger" role="progressbar" style="width: 100%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="theGreetings">
                <h3 class="mt-3 mb-3" id="theMessage"></h3>
                <h5 id="theHours"></h5>
            </div>

            <div id="character" style="height: 320px;"></div>

            <div id="allButtons">
                <div class="row">
                    <div class="col">
                        <button type="button" class="btn btn-success" id="eatButton">Makan</button>
                    </div>
                    <div class="col">
                        <button type="button" class="btn btn-info" id="sleepButton">Tidur</button>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <button type="button" class="btn btn-warning" id="playButton">Main</button>
                    </div>
                    <div class="col">
                        <button type="button" class="btn btn-danger" id="medButton">Obat</button>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>

            $(document).ready(function(){
                $('.progress-bar').each(function(){
                    var width = $(this).attr('aria-valuenow');
                    $(this).animate({width: width + '%'}, 1000, function(){
                        $(this).text(width + '%');
                    });
                });
            });

            $(document).ready(function() {
                let hour = 0;
                let minute = 0;
                let day = 1;
                setInterval(()=>{
                    minute++;
                    if(minute>=60){
                        hour++;
                        minute = 0;
                    }
                    if(hour>=24){
                        day++;
                        hour = 0;
                    }
                    let greeting;
                        if(hour >= 0 && hour < 12){
                            greeting = "Good Morning";
                        } 
                        else if(hour >= 12 && hour < 18){
                            greeting = "Good Aternoon";
                        } 
                        else{
                            greeting = "Good Evening";
                        }
                        $('#theMessage').text(greeting);
                    const formattedTime = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
                    $('#theHours').text(formattedTime);
                }, 1000);
            });

            $(document).ready(function(){
                var eatValue = 50;
                var sleepValue = 50;
                var playValue = 50;
                var medValue = 50;
                updateBars();
                // decrease the values of each progress bar every 2 seconds
                setInterval(function(){
                    if (eatValue > 0) eatValue -= 1;
                    if (sleepValue > 0) sleepValue -= 1;
                    if (playValue > 0) playValue -= 1;
                    if (medValue > 0) medValue -= 1;
                    updateBars();
                }, 5000);
                
                function updateBars(){
                    $("#eatBar .progress-bar").css("width", eatValue + "%").attr("aria-valuenow", eatValue).text(eatValue + "%");
                    $("#sleepBar .progress-bar").css("width", sleepValue + "%").attr("aria-valuenow", sleepValue).text(sleepValue + "%");
                    $("#playBar .progress-bar").css("width", playValue + "%").attr("aria-valuenow", playValue).text(playValue + "%");
                    $("#medBar .progress-bar").css("width", medValue + "%").attr("aria-valuenow", medValue).text(medValue + "%");
                }

                $("#eatButton").click(function(){
                    if(eatValue <100){
                        eatValue +=5;
                        sleepValue -=1;
                        playValue -= 1;
                        medValue -= 1;
                        updateBars();
                    }
                });

                $("#sleepButton").click(function(){
                    if(sleepValue <100){
                        eatValue -= 1;
                        sleepValue += 5;
                        playValue -= 1;
                        medValue -= 1;
                        updateBars();
                    }
                });

                $("#playButton").click(function(){
                    if(playValue <100){
                        eatValue -= 1;
                        sleepValue -= 1;
                        playValue += 5;
                        medValue -= 1;
                        updateBars();
                    }
                });

                $("#medButton").click(function(){
                    if(medValue <100){
                        eatValue -=1;
                        sleepValue -=1;
                        playValue -= 1;
                        medValue += 5;
                        updateBars();
                    }
                });
            });
        </script>
    </body>
</html>