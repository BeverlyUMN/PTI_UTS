<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Home Page</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
	<div class="container p-2 text-center">
		<div class="row">
			<div class="col">
				<h5 class="mt-2" id="pet"></h5>
			</div>
			<div class="col">
				<h3>UMN Gotcha</h3>
			</div>
			<div class="col">
				<h5 class="mt-2">Level 1</h5>
			</div>
		</div>
		<hr style="border: 2px solid black;">
		<div class="row p-1">
			<div class="col">
				<label>Makan</label>
				<div class="progress" role="progressbar" aria-label="Success example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
					<div class="progress-bar bg-success" id="bar-makan" style="width: 50%"></div>
				</div>
			</div>

			<div class="col">
				<label>Tidur</label>
				<div class="progress" role="progressbar" aria-label="Info example" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
					<div class="progress-bar bg-info" id="bar-tidur" style="width: 50%"></div>
				</div>
			</div>
		</div>
		<div class="row p-1">
			<div class="col">
				<label>Main</label>
				<div class="progress" role="progressbar" aria-label="Warning example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
					<div class="progress-bar bg-warning" id="bar-main" style="width: 50%"></div>
				</div>
			</div>
			<div class="col">
				<label>Kesehatan</label>
				<div class="progress" role="progressbar" aria-label="Danger example" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
					<div class="progress-bar bg-danger" id="bar-kesehatan"></div>
				</div>
			</div>
		</div>

		<div id="hourPlace">
			<h3 id="greeting"></h3>
			<h3 id="hour"></h3>
			<h5 id="day"></h5>
		</div>

		<div id="mainPlace">
			<div id="karakter" style="height: 310px;">
				
			</div>
			<div class="row">
				<div class="col">
					<button type="button" id="btn-makan" class="btn btn-success">Makan</button>
					<button type="button" id="btn-tidur" class="btn btn-info">Tidur</button>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<button type="button" id="btn-main" class="btn btn-warning">Main</button>
					<button type="button" id="btn-kesehatan" class="btn btn-danger">Kesehatan</button>
				</div>
			</div>
		</div>
		
	</div>

	<script type="text/javascript">
		var params = new URLSearchParams(window.location.search);
		var petname = params.get('petname'); 

		document.getElementById('pet').textContent = "Halo " + petname;

		//function salam sesuai jam
		function getHour() {
			let hour = 0;
			let minute = 0;
			let day = 1;

			setInterval(() => {
			  minute++;

			  if (minute >= 60) {
			    hour++;
			    minute = 0;
			  }

			  if (hour >= 24) {
			    day++;
			    hour = 0;
			  }

			  const formattedTime = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
			  document.getElementById('hour').textContent = formattedTime;
			  document.getElementById('day').textContent = `Day ${day}`;
			}, 1000);
		}

		function salamSesuaiJam(jam) {
		  let salam;

		  if (jam >= 0 && jam < 8) {
		    salam = "Good Morning";
		  } else if (jam >= 8 && jam < 14) {
		    salam = "Good Afternoon";
		  } else if (jam >= 14 && jam < 18) {
		    salam = "Good Evening";
		  } else {
		    salam = "Good Night";
		  }

		  document.getElementById('pet').textContent = `${salam}, ${petname}!`;
		}

		// Ambil elemen HTML yang dibutuhkan
		const barMakanElem = document.getElementById('bar-makan');
		const barTidurElem = document.getElementById('bar-tidur');
		const barMainElem = document.getElementById('bar-main');
		const barKesehatanElem = document.getElementById('bar-kesehatan');

		const btnMakanElem = document.getElementById('btn-makan');
		const btnTidurElem = document.getElementById('btn-tidur');
		const btnMainElem = document.getElementById('btn-main');
		const btnKesehatanElem = document.getElementById('btn-kesehatan');

		// Atur nilai awal untuk setiap bar
		let barMakanValue = 100;
		let barTidurValue = 100;
		let barMainValue = 100;
		let barKesehatanValue = 100;

		// Fungsi untuk memperbarui nilai setiap bar
		function updateBars() {
		  barMakanElem.style.width = barMakanValue + '%';
		  barTidurElem.style.width = barTidurValue + '%';
		  barMainElem.style.width = barMainValue + '%';
		  barKesehatanElem.style.width = barKesehatanValue + '%';
		}

		// Fungsi untuk menangani tombol makan
		function onBtnMakanClick() {
			if (barMakanValue != 100 || barTidurValue != 0 || barMainValue != 0 || barKesehatanValue != 0) {
				barMakanValue += 10;
				barTidurValue -= 5;
				barMainValue -= 5;
				barKesehatanValue -= 5;
				updateBars();
			}
		}

		// Fungsi untuk menangani tombol tidur
		function onBtnTidurClick() {
			if (barTidurValue != 100 || barMakanValue != 0 || barMainValue != 0 || barKesehatanValue != 0) {
				barMakanValue -= 5;
				barTidurValue += 10;
				barMainValue -= 5;
				barKesehatanValue -= 5;
				updateBars();
			}
		}

		// Fungsi untuk menangani tombol main
		function onBtnMainClick() {
			if (barMainValue != 100 || barMakanValue != 0 || barTidurValue != 0 || barKesehatanValue != 0) {
				barMakanValue -= 10;
		  		barTidurValue -= 5;
		  		barMainValue += 5;
		  		barKesehatanValue -= 5;
		  		updateBars();
			}
		  
		}

		// Fungsi untuk menangani tombol kesehatan
		function onBtnKesehatanClick() {
			if (barKesehatanValue != 100 || barMakanValue != 0 || barTidurValue != 0 || barMakanValue != 0) {
				barMakanValue -= 10;
		  		barTidurValue -= 5;
		  		barMainValue -= 5;
		  		barKesehatanValue += 5;
		  		updateBars();
			}
		}

		// Pasang event listener untuk masing-masing tombol
		btnMakanElem.addEventListener('click', onBtnMakanClick);
		btnTidurElem.addEventListener('click', onBtnTidurClick);
		btnMainElem.addEventListener('click', onBtnMainClick);
		btnKesehatanElem.addEventListener('click', onBtnKesehatanClick);

		// Panggil fungsi updateBars untuk pertama kali
		updateBars();

		function decreaseBars() {
		  setInterval(() => {
		    if (barMakanValue > 0) {
		      barMakanValue -= 1;
		    }
		    if (barTidurValue > 0) {
		      barTidurValue -= 1;
		    }
		    if (barMainValue > 0) {
		      barMainValue -= 1;
		    }
		    if (barKesehatanValue > 0) {
		      barKesehatanValue -= 1;
		    }
		    updateBars();
		  }, 5000);
		}

		// Panggil fungsi decreaseBars bersamaan dengan fungsi getHour
		getHour();
		decreaseBars();

	</script>

</body>
</html>